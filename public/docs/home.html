<html>
  <head>
    <link rel="stylesheet" type="text/css" href="/css/docs/styles.css" />
    <link rel="stylesheet" type="text/css" href="/css/docs/syntax.css" />
    <script type="text/javascript" src="https://unpkg.com/whatwg-fetch@2.0.3/fetch.js"></script>

    <script type="text/javascript">
      window.onload = function() {

        var raw = document.getElementById('yml-raw');
        if (!raw) return;
        var parse = document.getElementById('yml-parse');
        var msgs = document.getElementById('msgs');
        var config = document.getElementById('config');
        var expanded = document.getElementById('yml-expanded');

        var parseSpin = document.getElementById('parse-spin');
        var expandedSpin = document.getElementById('expanded-spin');

        var token = 'jfnCqbJlbvxZlX40uE0DKg';
        var parseURL = 'https://yml-staging.travis-ci.org/v1/parse';
        var expandURL = 'https://yml-staging.travis-ci.org/v1/expand';

        var throttle = function(fn, ms, scope) {
          var wait = false;
          return function() {
            var t = scope || this;
            var a = arguments;
            if (!wait) {
              wait = true;
              setTimeout(function() {
                fn.apply(t, a)
                wait = false;
              }, ms);
            }
          };
        };

        var parseReq = function(yml) {
          fetch(parseURL, {
            method: 'POST',
            headers: { 'Authorization': 'Basic ' + btoa('x:' + token) },
            body: yml
          }).then(parseRender);
        };

        var expandReq = throttle(function(config) {
          fetch(expandURL, {
            method: 'POST',
            headers: { 'Authorization': 'Basic ' + btoa('x:' + token) },
            body: JSON.stringify(config)
          }).then(expandRender);
        }, 500);

        var parseRender = function(response) {
          msgs.innerText = '';
          config.innerText = '';
          expanded.innerText = '';

          if (response.status >= 400) {
            response.json().then(parseError);
          } else {
            response.json().then(parseSuccess);
          }

          parseSpin.classList.remove('spinner');
        };

        var parseError = function(json) {
          parse.classList.add('error');
          config.innerText = json.error_type + ': ' + json.error_message;
        };

        var parseSuccess = function(json) {
          parse.classList.remove('error');
          if (json.full_messages.length > 0) { msgs.innerText = json.full_messages.join('\n\n'); }
          config.innerText = JSON.stringify(json.config, null, '  ');
          expandedSpin.classList.add('spinner');
          expandReq(json.config);
        };

        var expandRender = function(response) {
          if (response.status >= 400) {
            response.json().then(expandError);
          } else {
            response.json().then(expandSuccess);
          }

          expandedSpin.classList.remove('spinner');
        };

        var expandError = function(json) {
          expanded.classList.add('error');
          expanded.innerText = JSON.stringify(json);
        };

        var expandSuccess = function(json) {
          expanded.classList.remove('error');
          expanded.innerText = JSON.stringify(json.matrix, null, '  ');
        };

        raw.addEventListener('input', throttle(function(input) {
          parseSpin.classList.add('spinner');
          parseReq(input.target.innerText);
        }, 500));
      };
    </script>
  </head>
  <body>
    <div id="menu">
      <ul>
<li><a href="/">Home</a></li>
<li><a href="/ref/language">Language</a></li>
<li><a href="/ref/os">Os</a></li>
<li><a href="/ref/job/addons">Addons</a></li>
<li><a href="/ref/arch">Arch</a></li>
<li><a href="/ref/job/branches">Branches</a></li>
<li><a href="/ref/job/cache">Cache</a></li>
<li><a href="/ref/compiler">Compiler</a></li>
<li><a href="/ref/job/deploy">Deploy</a></li>
<li><a href="/ref/dist">Dist</a></li>
<li><a href="/ref/env">Env</a></li>
<li><a href="/ref/job/git">Git</a></li>
<li><a href="/ref/job/if/condition">If</a></li>
<li><a href="/ref/import">Import</a></li>
<li><a href="/ref/jobs">Jobs</a></li>
<li><a href="/ref/notifications">Notifications</a></li>
<li><a href="/ref/osx_image">Osx Image</a></li>
<li><a href="/ref/job/services">Services</a></li>
<li><a href="/ref/stages">Stages</a></li>
<li><a href="/ref/version">Version</a></li>
<li><a href="/matrix_expansion">Matrix Expansion</a></li>
<li><a href="/types">Types</a></li>
<li><a href="/index">Index</a></li>
<li><a href="/explore">Explore</a></li>
</ul>

    </div>
    <div id="content">
      <h1 id="travis-ci-build-config-reference">Travis CI Build Config Reference</h1>

<p>Welcome to the Travis CI build config reference documentation.</p>

<p>You can find the build config in the <code>.travis.yml</code> file in your repository. This site documents its format.</p>

<p>The Travis CI build config format is formally specified using a <a href="https://github.com/travis-ci/travis-yml/blob/master/schema.json">JSON Schema</a>. Travis CI uses this specification to normalize and validate build configs (this is currently in beta, and <a href="https://docs.travis-ci.com/user/build-config-validation">needs to be
activated</a>).</p>

<p>Use the <a href="/explore">Travis CI Build Config Explorer</a> to explore and experiment with build config YAML snippets.</p>

<h2 id="see-also">See also</h2>

<ul>
<li><a href="https://docs.travis-ci.com/user/job-lifecycle/">Job lifecycle</a></li>
</ul>

<h2 id="keys">Keys</h2>

<ul>
<li><p><code>language</code> &mdash; Language support to enable (type: enum (string), known values: <code>android</code>, <code>c</code>, <code>clojure</code>, <code>cpp</code>, <code>crystal</code>, <code>csharp</code>, <code>d</code>, <code>dart</code>, <code>elixir</code>, <code>elm</code>, <code>...</code>, default: <code>ruby, objective-c</code>, e.g.: <code>ruby</code>) <a href="/ref/language">details</a></p></li>
<li><p><code>os</code> &mdash; Build environment operating systems (type: sequence of enum (string), or enum (string), known values: <code>linux</code>, <code>osx</code>, <code>windows</code>) <a href="/ref/os">details</a></p></li>
<li><p><code>dist</code> &mdash; Build environment distribution (type: enum (string), known values: <code>trusty</code>, <code>precise</code>, <code>xenial</code>, <code>bionic</code>, <code>server-2016</code>) <a href="/ref/dist">details</a></p></li>
<li><p><code>arch</code> &mdash; Build environment architectures (type: sequence of enum (string), or enum (string), known values: <code>amd64</code>, <code>arm64</code>, <code>ppc64le</code>, <code>s390x</code>) <a href="/ref/arch">details</a></p></li>
<li><p><code>sudo</code> &mdash; Whether to allow sudo access (<strong>deprecated</strong>, type: boolean, or string, e.g.: <code>required</code>) <a href="/ref/sudo">details</a></p></li>
<li><p><code>import</code> &mdash; Build configuration imports (type: sequence of map, sequence of string, map, or string) <a href="/ref/import">details</a></p></li>
<li><p><code>env</code> &mdash; Environment variables to set up (type: map, sequence of map, sequence of secure, sequence of string, secure, or string) <a href="/ref/env">details</a></p></li>
<li><p><code>compiler</code> &mdash; Compilers to set up (type: sequence of string, or string) <a href="/ref/compiler">details</a></p></li>
<li><p><code>osx_image</code> &mdash; (type: sequence of string, or string) <a href="/ref/osx_image">details</a></p></li>
<li><p><code>stages</code> &mdash; Build stages definition (type: sequence of map, sequence of string, map, or string) <a href="/ref/stages">details</a></p></li>
<li><p><code>jobs</code> &mdash; Build matrix definitions (type: map, sequence of job matrix entry, or job matrix entry, alias: <code>matrix</code>) <a href="/ref/jobs">details</a></p></li>
<li><p><code>notifications</code> &mdash; Notification targets to notify on build results (type: map, sequence of map, sequence of sequence of secure, sequence of secure, sequence of boolean, secure, or boolean) <a href="/ref/notifications">details</a></p></li>
<li><p><code>version</code> &mdash; Build config specification version (type: string, e.g.: <code>&gt;= 1.0.0</code>) <a href="/ref/version">details</a></p></li>
</ul>

<h2 id="shared-keys">Shared keys</h2>

<ul>
<li><code>addons</code>: Build addons to activate <a href="/ref/job/addons">details</a></li>
<li><code>branches</code>: Include or exclude branches from being built <a href="/ref/job/branches">details</a></li>
<li><code>cache</code>: Cache settings to speed up the build <a href="/ref/job/cache">details</a></li>
<li><code>deploy</code>: Deployment target configurations <a href="/ref/job/deploy">details</a></li>
<li><code>git</code>: Git settings <a href="/ref/job/git">details</a></li>
<li><code>if</code>: Condition to determine if a build, stage, or job should be run, a config source imported, or a notification sent <a href="/ref/job/if/condition">details</a></li>
<li><code>services</code>: Services to set up and start <a href="/ref/job/services">details</a></li>
<li><code>before_install</code>: Scripts to run before the install stage </li>
<li><code>install</code>: Scripts to run at the install stage </li>
<li><code>before_script</code>: Scripts to run before the script stage </li>
<li><code>script</code>: Scripts to run at the script stage </li>
<li><code>before_cache</code>: Scripts to run before storing a build cache </li>
<li><code>after_success</code>: Scripts to run after a successful script stage </li>
<li><code>after_failure</code>: Scripts to run after a failing script stage </li>
<li><code>before_deploy</code>: Scripts to run before the deploy stage </li>
<li><code>after_deploy</code>: Scripts to run after the deploy stage </li>
<li><code>after_script</code>: Scripts to run as the last stage </li>
</ul>

<h2 id="examples">Examples</h2>

<pre><code class="yaml">language: ruby
os:
- linux
- osx
dist: trusty
</code></pre>

<pre><code class="yaml">os: linux

</code></pre>

    </div>
    <div class="corner-ribbon">Beta</div>
  </body>
</html>
